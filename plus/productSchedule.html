<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="misapplication-tap-highlight" content="no" />
		<meta name="HandheldFriendly" content="true" />
		<meta name="MobileOptimized" content="320" />
		<title>排产查询</title>
		<link rel="stylesheet" href="../css/common.css" />
		<link rel="stylesheet" href="../css/style.css" />
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
		<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
		<script type="text/javascript" src="../js/common.js"></script>
		<script type="text/javascript">
			var domready = false;
			// plusready 比 domcontentready 晚
			function plusReady() {
				if(!window.plus || !domready) {
					return;
				}
				plus.screen.lockOrientation('landscape-secondary');

				var dom = document.getElementById("container");
				var myChart = echarts.init(dom);
				var app = {};
				option = null;

				var data = [];
				var dataCount = 10;
				var startTime = +new Date();
				var categories = ['categoryA', 'categoryB', 'categoryC'];
				var types = [{
						name: 'JS Heap',
						color: '#7b9ce1'
					},
					{
						name: 'Documents',
						color: '#bd6d6c'
					},
					{
						name: 'Nodes',
						color: '#75d874'
					},
					{
						name: 'Listeners',
						color: '#e0bc78'
					},
					{
						name: 'GPU Memory',
						color: '#dc77dc'
					},
					{
						name: 'GPU',
						color: '#72b362'
					}
				];

				// Generate mock data
				echarts.util.each(categories, function(category, index) {
					var baseTime = startTime;
					for(var i = 0; i < dataCount; i++) {
						var typeItem = types[Math.round(Math.random() * (types.length - 1))];
						var duration = Math.round(Math.random() * 10000);
						data.push({
							name: typeItem.name,
							value: [
								index,
								baseTime,
								baseTime += duration,
								duration
							],
							itemStyle: {
								normal: {
									color: typeItem.color
								}
							}
						});
						baseTime += Math.round(Math.random() * 2000);
					}
				});

				function renderItem(params, api) {
					var categoryIndex = api.value(0);
					var start = api.coord([api.value(1), categoryIndex]);
					var end = api.coord([api.value(2), categoryIndex]);
					var height = api.size([0, 1])[1] * 0.6;

					return {
						type: 'rect',
						shape: echarts.graphic.clipRectByRect({
							x: start[0],
							y: start[1] - height / 2,
							width: end[0] - start[0],
							height: height
						}, {
							x: params.coordSys.x,
							y: params.coordSys.y,
							width: params.coordSys.width,
							height: params.coordSys.height
						}),
						style: api.style()
					};
				}

				option = {
					tooltip: {
						formatter: function(params) {
							return params.marker + params.name + ': ' + params.value[3] + ' ms';
						}
					},
					title: {
						text: 'Profile',
						left: 'center'
					},
					legend: {
						data: ['bar', 'error']
					},
					dataZoom: [{
						type: 'inside',
						filterMode: 'weakFilter'
					}],
					grid: {
						height: 100
					},
					xAxis: {
						min: startTime,
						scale: true,
						axisLabel: {
							formatter: function(val) {
								return Math.max(0, val - startTime) + ' ms';
							}
						}
					},
					yAxis: {
						data: categories
					},
					series: [{
						type: 'custom',
						renderItem: renderItem,
						itemStyle: {
							normal: {
								opacity: 0.8
							}
						},
						encode: {
							x: [1, 2],
							y: 0
						},
						data: data
					}]
				};;
				if(option && typeof option === "object") {
					myChart.setOption(option, true);
				}
			}
			if(window.plus) {
				plusReady();
			} else {
				document.addEventListener('plusready', plusReady, false);
			}
			// 监听DOMContentLoaded事件
			document.addEventListener('DOMContentLoaded', function() {
				domready = true;
				plusReady();
			}, false);
			// 返回
			function goback() {
				plus.screen.lockOrientation('portrait-primary');
				plus.screen.unlockOrientation();
				plus.webview.currentWebview().close("slide-out-left", null);
			}
		</script>
	</head>

	<body>
		<header style="z-index: 1000;">
			<div class="goback" onclick="goback()">
				<i class="icon-chevron-left"></i>
			</div>
			<div class="title">排产查询</div>
		</header>
		<div class="contain-wrapper">
			<div id="container" style="height: 1000px"></div>
		</div>
	</body>

</html>